<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./index.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Noto Sans:wght@700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Plus Jakarta Sans:wght@400&display=swap"
    />
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
  </head>

  <body>
    <div class="div">
      <div class="bg"></div>
      <div class="component-1">
        <div class="widget-3">
          <b class="help-menu">FOLLOW US ON</b>
        </div>
        <img class="social-icon" alt="" src="./public/social.svg" />

        <div class="youtube">
          <a href="https://www.youtube.com/@SIT-GDSC" target="_blank">Youtube</a>
        </div>

        <div class="github">
          <a href="https://www.github.com" target="_blank">Github</a>
        </div>

        <div class="twitter">
          <a href="https://www.twitter.com" target="_blank">Twitter</a>
        </div>

        <div class="instagram">
          <a href="https://www.instagram.com/gdscsit/?utm_source=qr&igshid=MzNlNGNkZWQ4Mg%3D%3D" target="_blank">Instagram</a>
        </div>
      </div>
      <img
        class="child"
        alt=""
        src="./public/group-48.svg"
        data-animate-on-scroll
      />

      <div class="bottom-footer">
        <div class="copyright">
          <span>
            <span>Â© Copyright 2023, All Rights Reserved by</span>
            <span class="span"> </span>
          </span>
          <span class="span">
            <b>GDSC</b>
          </span>
          <span class="span1">-</span>
          <b class="span">SIT</b>
          <span> </span>
        </div>
        <div class="bottom-footer-child"></div>
      </div>
      <b class="google-developers-students">Google Developers Students Club</b>
      <b class="sit-manglore">
        <span> </span>
        <span class="span1">SIT -MANGLORE</span>
      </b>
      <img class="image-5-icon" alt="" src="./public/image-5@2x.png" />

      <div class="cta">
        <img class="bg-icon" alt="" src="./public/bg.svg" />

        <div class="content">
          <b class="google-cloud-study"
            >Google Cloud Study Jam 2023 - GDSC SIT Mangalore</b
          >
          <div class="form">
            <div class="inputtext-style-3">
              <div class="input-label">Email</div>
              <input class="inputtext-style-3-child" type="email" id="email" />
            </div>
            Copy code
            <button class="buttonprimarywith-icon" autofocus onclick="search()">
              <div class="button-name-parent">
                <div class="button-name">DOWNLOAD CERTIFICATE</div>
                <div class="icon">
                  <img
                    class="iconoutlinearrow-right"
                    alt=""
                    src="./public/iconoutlinearrowright.svg"
                  />
                </div>
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      function search() {
        const email = document.getElementById("email").value;
        const jsonFile = "data.json";

        fetch(jsonFile)
          .then((response) => response.json())
          .then((data) => {
            let foundData = null;

            for (let i = 0; i < data.length; i++) {
              if (data[i]["Student Email"] === email) {
                foundData = data[i];
                break;
              }
            }

            if (foundData) {
              validateData(
                foundData["Student Name"],
                foundData["Google Cloud Skills Boost Profile URL"]
              );
            } else {
              handleNotFound();
            }
          })
          .catch((error) => {
            console.error("Error loading data:", error);
          });
      }

      function handleNotFound() {
        alert("Email not found!");
      }

      function validateData(name, url) {
        // const capitalize = (str, lower = false) =>
        //   (lower ? str.toLowerCase() : str).replace(
        //     /(?:^|\s|["'([{])+\S/g,
        //     (match) => match.toUpperCase()
        //   );
        // const val = capitalize(name);

        //check if the text is empty or not
        if (name.trim() !== "") {
          generatePDF(name, url);
        } else {
          console.log("somthing went wrong");
        }
      }
    </script>
    <script src="https://unpkg.com/pdf-lib@1.4.0"></script>
    <script src="./FileSaver.js"></script>
    <script src="https://unpkg.com/@pdf-lib/fontkit@0.0.4"></script>
    <script src="./index.js"></script>
  </body>
</html>
